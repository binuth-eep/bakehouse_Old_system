<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Order History</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="navbar-placeholder"></div>
  
<section id="sub-pages">
  <div class="subpages_box">
    <a href="order_placement.html" class="btn subpage-btn">Place Order</a>
    <a href="order_edit.html" class="btn subpage-btn">Edit Orders</a>
    <a href="order_tracking.html" class="btn subpage-btn">Track Order</a>
    <a href="order_history.html" class="btn subpage-btn">History</a>
  </div>
</section>

  <main class="container my-5">
    <h1 class="h5">My Orders</h1>
    <p class="text-muted">Completed and cancelled orders appear here.</p>

    <div class="mb-3">
      <input id="search-order" class="form-control" placeholder="Search by order id or date">
    </div>

    <ul id="my-orders" class="list-group"></ul>
  </main>

  <div id="footer-placeholder"></div>

  <script src="js/script.js"></script>

  <script>
    // demo history rendering
    const myOrders = [
      {order_id:'TSH-20250815-001', date:'2025-08-15', total:1400, status:'delivered'},
      {order_id:'TSH-20250710-009', date:'2025-07-10', total:950, status:'cancelled'},
      {order_id:'TSH-20250801-022', date:'2025-08-01', total:2200, status:'delivered'}
    ];

    function render(list){
      const el = document.getElementById('my-orders');
      el.innerHTML = '';
      list.forEach(o=>{
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `<div>
                         <div class="fw-semibold">${o.order_id} <small class="text-muted">Â· ${o.date}</small></div>
                         <div class="small text-muted">Status: ${o.status}</div>
                         </div>
                         <div class="text-end">
                           <div class="fw-semibold">LKR ${(o.total).toLocaleString('en-LK')}</div>
                           <div class="mt-2">
                             <a class="btn btn-sm btn-outline-primary" href="order_confirmation.html?order_id=${o.order_id}">View</a>
                             <a class="btn btn-sm btn-outline-secondary ms-1" href="order_edit.html?order_id=${o.order_id}">Edit</a>
                             <a class="btn btn-sm btn-outline-success ms-1" href="#">Download Invoice</a>
                           </div>
                         </div>`;
        el.appendChild(li);
      });
    }
    render(myOrders);

    document.getElementById('search-order').addEventListener('input', (e)=>{
      const q = e.target.value.toLowerCase();
      render(myOrders.filter(o => o.order_id.toLowerCase().includes(q) || o.date.includes(q)));
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
