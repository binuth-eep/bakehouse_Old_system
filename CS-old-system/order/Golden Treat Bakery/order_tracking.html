<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Track Order</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>

  <!-- Your theme -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* small page-specific tweaks */
    .progress-track { height: 10px; border-radius: 999px; overflow: hidden; background: linear-gradient(90deg, rgba(0,0,0,0.04), rgba(0,0,0,0.03)); }
    .step { display:flex; align-items:center; gap:.75rem; }
    .step-dot { width:14px; height:14px; border-radius:50%; border:2px solid rgba(0,0,0,0.06); display:inline-block; background:#fff; }
    .step-dot.active { background: var(--btn); border-color: var(--btn); box-shadow:0 6px 18px rgba(0,0,0,0.06); }
    .small-muted { font-size:13px; color:var(--ink-soft); }
    #map-placeholder { background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01)); border-radius:10px; min-height:160px; display:flex; align-items:center; justify-content:center; color:var(--ink-soft); }
  </style>
</head>
<body>

  <!-- navbar placeholder -->
  <div id="navbar-placeholder"></div>

<section id="sub-pages">
  <div class="subpages_box">
    <a href="order_placement.html" class="btn subpage-btn">Place Order</a>
    <a href="order_edit.html" class="btn subpage-btn">Edit Orders</a>
    <a href="order_tracking.html" class="btn subpage-btn">Track Order</a>
    <a href="order_history.html" class="btn subpage-btn">History</a>
  </div>
</section>

  <main class="container my-5" id="order-track-main">
    <div class="row g-4">
      <!-- Left: lookup & status -->
      <div class="col-lg-7">
        <div class="card">
          <div class="card-body">
            <h1 class="h5 mb-2">Track your order</h1>
            <p class="small-muted mb-3">Enter your Order ID, email or phone to see live status.</p>

            <form id="track-form" class="row g-2 align-items-center">
              <div class="col-12 col-md-8">
                <label for="order-query" class="visually-hidden">Order ID / Email / Phone</label>
                <input id="order-query" class="form-control" placeholder="e.g. TSH-20250815-001 or +94771234567 or you@example.com" required>
              </div>
              <div class="col-auto d-grid">
                <button type="submit" class="btn btn-primary">Track</button>
              </div>
              <div class="col-12">
                <div id="track-msg" class="text-small muted"></div>
              </div>
            </form>

            <hr class="my-3">

            <div id="status-panel" style="display:none;">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div>
                  <div class="small-muted">Order</div>
                  <div class="fw-semibold" id="status-order-id">—</div>
                </div>
                <div class="text-end small-muted">
                  <div id="status-last-update">—</div>
                  <button id="copy-order-id" class="btn btn-sm btn-outline-secondary ms-2"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
              </div>

              <!-- progress bar -->
              <div class="mb-3">
                <div class="progress-track mb-2">
                  <div id="progress-bar" style="height:100%; width:0%; background:linear-gradient(90deg,var(--btn),var(--btn-hover)); transition:width .6s ease;"></div>
                </div>

                <div class="d-flex justify-content-between small-muted">
                  <div class="step"><span class="step-dot" data-step="1"></span> <small>Processing</small></div>
                  <div class="step"><span class="step-dot" data-step="2"></span> <small>Packed</small></div>
                  <div class="step"><span class="step-dot" data-step="3"></span> <small>Shipped</small></div>
                  <div class="step"><span class="step-dot" data-step="4"></span> <small>Out for delivery</small></div>
                  <div class="step"><span class="step-dot" data-step="5"></span> <small>Delivered</small></div>
                </div>
              </div>

              <!-- status summary -->
              <div class="mb-3">
                <h2 class="h6 mb-1" id="status-headline">Status: —</h2>
                <p id="status-detail" class="small-muted">—</p>
              </div>

              <!-- courier & ETA -->
              <div class="row g-2">
                <div class="col-12 col-md-6">
                  <div class="small-muted">Estimated delivery</div>
                  <div class="fw-semibold" id="status-eta">—</div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="small-muted">Courier</div>
                  <div class="fw-semibold" id="status-courier">—</div>
                </div>
              </div>

              <hr class="my-3">

              <!-- order items summary (collapsible) -->
              <div>
                <button class="btn btn-sm btn-outline-secondary mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#order-summary-collapse">Show order summary</button>
                <div id="order-summary-collapse" class="collapse">
                  <ul id="track-order-items" class="list-group">
                    <!-- rendered by JS -->
                  </ul>
                </div>
              </div>

            </div> <!-- end status-panel -->

          </div>
        </div>

        <!-- notify me -->
        <div class="card mt-3">
          <div class="card-body">
            <h2 class="h6">Notify me when status changes</h2>
            <p class="small-muted">We can send an email or SMS when your order status updates (backend required).</p>
            <form id="notify-form" class="row g-2">
              <div class="col-md-6">
                <input id="notify-email" type="email" class="form-control" placeholder="Email (optional)">
              </div>
              <div class="col-md-4">
                <input id="notify-phone" type="tel" class="form-control" placeholder="Phone (with country code)">
              </div>
              <div class="col-md-2 d-grid">
                <button id="notify-btn" class="btn btn-outline-primary" type="button">Subscribe</button>
              </div>
            </form>
            <div id="notify-msg" class="mt-2 small-muted"></div>
            <div class="mt-2 text-small muted">Note: Subscribing calls <code>/send-tracking-notify.php</code> on your server with <code>order_id,email,phone</code>.</div>
          </div>
        </div>

      </div>

      <!-- Right: Map & details -->
      <div class="col-lg-5">
        <div class="card mb-3">
          <div class="card-body">
            <h2 class="h6 mb-2">Delivery location</h2>
            <div id="map-placeholder">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3955.7843728792523!2d80.3653691!3d7.4890449!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae33a1f76f3dfaf%3A0x288f333fefb6c535!2sSLIIT%20Kurunegala%20Center!5e0!3m2!1sen!2slk!4v1731094930563!5m2!1sen!2slk" 
            width="600" height="200" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>

            <hr class="my-3">

            <h2 class="h6 mb-2">Tracking history</h2>
            <ul id="tracking-history" class="list-group small-muted">
              <!-- populated by JS -->
            </ul>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <h2 class="h6 mb-2">Help & support</h2>
            <p class="small-muted mb-2">If you have issues with delivery, contact our support.</p>
            <a href="mailto:support@techshelf.example" class="link-primary">support@techshelf.example</a><br>
            <a href="tel:+94111234567" class="muted">+94 11 123 4567</a>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- footer placeholder -->
  <div id="footer-placeholder"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Page JS (deferred) -->
  <script src="js/order-tracking.js" defer></script>
  <script src="js/script.js" defer></script>
</body>
</html>
